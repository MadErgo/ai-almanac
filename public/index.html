<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI黄历 / The Dao Almanac - Your Daily Cosmic Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: bold;
        }

        .logo-icon {
            font-size: 32px;
        }

        .title {
            display: flex;
            flex-direction: column;
        }

        .title-main {
            font-size: 24px;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .title-sub {
            font-size: 12px;
            color: #999;
        }

        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .lang-btn {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid #ffd700;
            color: #ffd700;
            cursor: pointer;
            border-radius: 20px;
            transition: all 0.3s;
            font-size: 14px;
        }

        .lang-btn.active {
            background: #ffd700;
            color: #1a1a2e;
        }

        .lang-btn:hover {
            background: #ffd700;
            color: #1a1a2e;
        }

        .status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4ade80;
        }

        .status-dot.disconnected {
            background: #ef4444;
        }

        main {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 40px;
        }

        .form-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
        }

        .form-title {
            font-size: 24px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #e0e0e0;
        }

        .required {
            color: #ffd700;
        }

        input[type="text"],
        input[type="date"],
        select {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 14px;
            transition: all 0.3s;
        }

        input[type="text"]::placeholder,
        select {
            color: #888;
        }

        input[type="text"]:focus,
        input[type="date"]:focus,
        select:focus {
            outline: none;
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
        }

        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        input[type="radio"] {
            cursor: pointer;
            accent-color: #ffd700;
        }

        .hint {
            font-size: 12px;
            color: #888;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .hint-icon {
            font-size: 14px;
        }

        .privacy-notice {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
            padding: 12px 16px;
            border-radius: 4px;
            font-size: 12px;
            color: #a0aec0;
            margin-top: 20px;
            line-height: 1.5;
        }

        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-generate {
            background: #ffd700;
            color: #1a1a2e;
        }

        .btn-generate:hover {
            background: #ffed4e;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
        }

        .btn-generate:disabled {
            background: #888;
            cursor: not-allowed;
            transform: none;
        }

        .btn-share {
            background: rgba(255, 255, 255, 0.1);
            color: #ffd700;
            border: 1px solid #ffd700;
        }

        .btn-share:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateY(-2px);
        }

        .result-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .result-title {
            font-size: 28px;
            font-weight: bold;
            text-align: center;
        }

        .date-display {
            text-align: center;
            font-size: 16px;
            color: #888;
        }

        .element-display {
            display: flex;
            justify-content: center;
            gap: 20px;
            font-size: 14px;
        }

        .element-item {
            padding: 8px 16px;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid #ffd700;
            border-radius: 20px;
            color: #ffd700;
        }

        .result-item {
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-left: 3px solid #ffd700;
            border-radius: 4px;
        }

        .result-label {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .result-content {
            font-size: 16px;
            line-height: 1.6;
            color: #e0e0e0;
            min-height: 40px;
        }

        .wisdom {
            font-size: 18px;
            text-align: center;
            padding: 24px;
            background: rgba(255, 215, 0, 0.08);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            font-style: italic;
            line-height: 1.8;
            color: #ffd700;
        }

        .footer-name {
            text-align: right;
            font-size: 14px;
            color: #888;
            margin-top: 20px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-top-color: #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            background: #2d3748;
            color: #e0e0e0;
            border-radius: 8px;
            display: none;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        .message.show {
            display: block;
        }

        .message.success {
            background: #10b981;
            color: white;
        }

        .message.error {
            background: #ef4444;
            color: white;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 1024px) {
            main {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 20px;
            }

            .form-section,
            .result-section {
                padding: 24px;
            }

            .title-main {
                font-size: 18px;
            }

            .controls {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <span class="logo-icon">🔮</span>
                <div class="title">
                    <div class="title-main">AI黄历 / The Dao Almanac</div>
                    <div class="title-sub">MVP · Your Daily Cosmic Guide</div>
                </div>
            </div>
            <div class="controls">
                <button class="lang-btn active" id="btn-cn" onclick="switchLanguage('cn')">中文</button>
                <button class="lang-btn" id="btn-en" onclick="switchLanguage('en')">English</button>
                <div class="status">
                    <span id="apiStatus" class="status-dot"></span>
                    <span id="apiStatusText">X API连接</span>
                </div>
            </div>
        </header>

        <main>
            <div class="form-section">
                <h2 class="form-title" id="form-title">生成你的黄历签文</h2>
                
                <form id="almanacForm">
                    <div class="form-group">
                        <label for="name" id="label-name">姓名 <span class="required">*</span></label>
                        <input type="text" id="name" placeholder="请输入您的名字" required>
                        <div class="hint" id="hint-name">
                            <span class="hint-icon">ℹ️</span>
                            <span id="hint-name-text">仅用于AI分析，不会公开</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="nickname" id="label-nickname">昵称 <span class="required">*</span></label>
                        <input type="text" id="nickname" placeholder="请输入昵称" required>
                        <div class="hint" id="hint-nickname">
                            <span class="hint-icon">✨</span>
                            <span id="hint-nickname-text">将显示在您的签文中</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="birthdate" id="label-birthdate">生日 <span class="required">*</span></label>
                        <input type="date" id="birthdate" required>
                    </div>

                    <div class="form-group">
                        <label for="birthTime" id="label-birthTime">出生时刻 (可选)</label>
                        <select id="birthTime">
                            <option value="unknown" id="time-unknown">不确定</option>
                            <option value="dawn" id="time-dawn">清晨 (05:00-07:00)</option>
                            <option value="morning" id="time-morning">上午 (07:00-11:00)</option>
                            <option value="noon" id="time-noon">中午 (11:00-13:00)</option>
                            <option value="afternoon" id="time-afternoon">下午 (13:00-17:00)</option>
                            <option value="dusk" id="time-dusk">傍晚 (17:00-19:00)</option>
                            <option value="night" id="time-night">夜间 (19:00-05:00)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label id="label-mood">心情状态 <span class="required">*</span></label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="mood" value="calm" checked>
                                <span id="mood-calm">平静</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mood" value="anxious">
                                <span id="mood-anxious">焦虑</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mood" value="impulsive">
                                <span id="mood-impulsive">冲动</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mood" value="focused">
                                <span id="mood-focused">专注</span>
                            </label>
                        </div>
                    </div>

                    <div class="privacy-notice" id="privacy-notice">
                        🔒 隐私提示：您的姓名和生日仅用于AI命理分析，绝不会显示在分享卡片中，签文只会以"昵称"的形式显示。
                    </div>

                    <div class="buttons">
                        <button type="submit" class="btn-generate" id="btn-generate">生成签文</button>
                        <button type="button" class="btn-share" id="btn-share" style="display: none;">分享卡片</button>
                    </div>
                </form>
            </div>

            <div class="result-section">
                <div class="result-title" id="result-title">今日黄历</div>
                <div class="date-display" id="date">2025年10月30日</div>
                <div class="element-display">
                    <div class="element-item" id="element">五行</div>
                    <div class="element-item" id="polarity">阴阳</div>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <div id="loading-text">正在生成您的签文...</div>
                </div>

                <div id="resultContent" style="display: none;">
                    <div class="result-item">
                        <div class="result-label" id="label-auspicious">宜</div>
                        <div class="result-content" id="auspicious"></div>
                    </div>

                    <div class="result-item">
                        <div class="result-label" id="label-avoid">忌</div>
                        <div class="result-content" id="avoid"></div>
                    </div>

                    <div class="result-item">
                        <div class="result-label" id="label-lucky">幸运提示</div>
                        <div class="result-content" id="lucky"></div>
                    </div>

                    <div class="wisdom" id="wisdom"></div>

                    <div class="footer-name" id="footer"></div>
                </div>
            </div>
        </main>
    </div>

    <div class="message" id="message"></div>

    <script>
        // 配置
        const API_BASE_URL = 'https://ai-almanac.vercel.app';

        let currentLanguage = 'cn';
        let apiConnected = false;

        // 多语言配置
        const translations = {
            cn: {
                'form-title': '生成你的黄历签文',
                'label-name': '姓名',
                'label-nickname': '昵称',
                'label-birthdate': '生日',
                'label-birthTime': '出生时刻 (可选)',
                'label-mood': '心情状态',
                'mood-calm': '平静',
                'mood-anxious': '焦虑',
                'mood-impulsive': '冲动',
                'mood-focused': '专注',
                'time-dawn': '清晨 (05:00-07:00)',
                'time-morning': '上午 (07:00-11:00)',
                'time-noon': '中午 (11:00-13:00)',
                'time-afternoon': '下午 (13:00-17:00)',
                'time-dusk': '傍晚 (17:00-19:00)',
                'time-night': '夜间 (19:00-05:00)',
                'time-unknown': '不确定',
                'hint-name': '仅用于AI分析，不会公开',
                'hint-nickname': '将显示在您的签文中',
                'privacy-notice': '🔒 隐私提示：您的姓名和生日仅用于AI命理分析，绝不会显示在分享卡片中，签文只会以"昵称"的形式显示。',
                'btn-generate': '生成签文',
                'btn-share': '分享卡片',
                'result-title': '今日黄历',
                'label-auspicious': '宜',
                'label-avoid': '忌',
                'label-lucky': '幸运提示',
                'loading-text': '正在生成您的签文...',
                'success-generate': '✓ 签文已生成',
                'error-required': '请填写所有必填字段',
                'error-network': '网络连接失败，请检查API服务器',
                'statusKey': 'statusText'
            },
            en: {
                'form-title': 'Generate Your Almanac Reading',
                'label-name': 'Name',
                'label-nickname': 'Nickname',
                'label-birthdate': 'Birth Date',
                'label-birthTime': 'Birth Time (Optional)',
                'label-mood': 'Current Mood',
                'mood-calm': 'Calm',
                'mood-anxious': 'Anxious',
                'mood-impulsive': 'Impulsive',
                'mood-focused': 'Focused',
                'time-dawn': 'Dawn (05:00-07:00)',
                'time-morning': 'Morning (07:00-11:00)',
                'time-noon': 'Noon (11:00-13:00)',
                'time-afternoon': 'Afternoon (13:00-17:00)',
                'time-dusk': 'Dusk (17:00-19:00)',
                'time-night': 'Night (19:00-05:00)',
                'time-unknown': 'Unknown',
                'hint-name': 'For AI analysis only, never shared',
                'hint-nickname': 'Will be displayed in your reading',
                'privacy-notice': '🔒 Privacy Notice: Your name and birth date are used only for AI divination analysis and will never be shown on shared cards. Only your nickname will be displayed.',
                'btn-generate': 'Generate Reading',
                'btn-share': 'Share Card',
                'result-title': 'Today\'s Almanac',
                'label-auspicious': 'Auspicious',
                'label-avoid': 'Avoid',
                'label-lucky': 'Lucky Tips',
                'loading-text': 'Generating your reading...',
                'success-generate': '✓ Reading generated',
                'error-required': 'Please fill in all required fields',
                'error-network': 'Network error. Please check the API server',
                'statusKey': 'statusText'
            }
        };

        // 检查API连接
        async function checkApiStatus() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/health`, { timeout: 5000 });
                apiConnected = response.ok;
            } catch (error) {
                apiConnected = false;
            }
            updateApiStatus();
        }

        function updateApiStatus() {
            const status = document.getElementById('apiStatus');
            const statusText = document.getElementById('apiStatusText');
            if (apiConnected) {
                status.classList.remove('disconnected');
                statusText.textContent = currentLanguage === 'cn' ? '✓ API已连接' : '✓ API Connected';
            } else {
                status.classList.add('disconnected');
                statusText.textContent = currentLanguage === 'cn' ? 'X API连接' : 'X API Disconnected';
            }
        }

        // 切换语言
        function switchLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('btn-cn').classList.toggle('active', lang === 'cn');
            document.getElementById('btn-en').classList.toggle('active', lang === 'en');
            updateTexts();
            updateApiStatus();
        }

        function updateTexts() {
            const trans = translations[currentLanguage];
            document.getElementById('form-title').textContent = trans['form-title'];
            document.getElementById('label-name').innerHTML = trans['label-name'] + ' <span class="required">*</span>';
            document.getElementById('label-nickname').innerHTML = trans['label-nickname'] + ' <span class="required">*</span>';
            document.getElementById('label-birthdate').innerHTML = trans['label-birthdate'] + ' <span class="required">*</span>';
            document.getElementById('label-birthTime').textContent = trans['label-birthTime'];
            document.getElementById('label-mood').innerHTML = trans['label-mood'] + ' <span class="required">*</span>';
            
            document.getElementById('mood-calm').textContent = trans['mood-calm'];
            document.getElementById('mood-anxious').textContent = trans['mood-anxious'];
            document.getElementById('mood-impulsive').textContent = trans['mood-impulsive'];
            document.getElementById('mood-focused').textContent = trans['mood-focused'];
            
            document.getElementById('time-dawn').textContent = trans['time-dawn'];
            document.getElementById('time-morning').textContent = trans['time-morning'];
            document.getElementById('time-noon').textContent = trans['time-noon'];
            document.getElementById('time-afternoon').textContent = trans['time-afternoon'];
            document.getElementById('time-dusk').textContent = trans['time-dusk'];
            document.getElementById('time-night').textContent = trans['time-night'];
            document.getElementById('time-unknown').textContent = trans['time-unknown'];
            
            document.getElementById('hint-name-text').textContent = trans['hint-name'];
            document.getElementById('hint-nickname-text').textContent = trans['hint-nickname'];
            document.getElementById('privacy-notice').textContent = trans['privacy-notice'];
            document.getElementById('btn-generate').textContent = trans['btn-generate'];
            document.getElementById('result-title').textContent = trans['result-title'];
            document.getElementById('label-auspicious').textContent = trans['label-auspicious'];
            document.getElementById('label-avoid').textContent = trans['label-avoid'];
            document.getElementById('label-lucky').textContent = trans['label-lucky'];
            document.getElementById('loading-text').textContent = trans['loading-text'];
        }

        // 显示加载状态
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
            document.getElementById('resultContent').style.display = show ? 'none' : 'block';
            document.getElementById('btn-generate').disabled = show;
        }

        // 显示消息
        function showMessage(type, text) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.className = `message show ${type}`;
            setTimeout(() => {
                msg.classList.remove('show');
            }, 3000);
        }

        // 显示结果
        function displayResult(data, nickname) {
            const today = new Date();
            const dateStr = currentLanguage === 'cn'
                ? `${today.getFullYear()}年${today.getMonth() + 1}月${today.getDate()}日`
                : `${today.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}`;

            // 处理数据中的各个字段
            const auspicious = data.auspicious || '';
            const avoid = data.avoid || '';
            const lucky = data.lucky || `${data.luckyDirection || ''} · ${data.luckyColor || ''} · ${data.luckyHour || ''}`;
            const wisdom = data.wisdom || '';

            document.getElementById('date').textContent = dateStr;
            document.getElementById('auspicious').textContent = auspicious;
            document.getElementById('avoid').textContent = avoid;
            document.getElementById('lucky').textContent = lucky;
            document.getElementById('wisdom').textContent = wisdom;
            document.getElementById('footer').textContent = `— For ${nickname}`;

            showLoading(false);
        }

        // 表单提交
        document.getElementById('almanacForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = {
                name: document.getElementById('name').value,
                nickname: document.getElementById('nickname').value,
                birthdate: document.getElementById('birthdate').value,
                birthTime: document.getElementById('birthTime').value,
                mood: document.querySelector('input[name="mood"]:checked').value,
                language: currentLanguage
            };

            if (!formData.name || !formData.nickname || !formData.birthdate) {
                showMessage('error', translations[currentLanguage]['error-required']);
                return;
            }

            showLoading(true);

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-almanac`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                if (!response.ok) {
                    throw new Error('API request failed');
                }

                const result = await response.json();
                
                // 处理后端返回的数据格式
                let almanacData;
                if (result.data && typeof result.data === 'object') {
                    almanacData = result.data;
                } else if (result.success && result.data) {
                    almanacData = result.data;
                } else {
                    almanacData = result;
                }
                
                displayResult(almanacData, formData.nickname);
                showMessage('success', translations[currentLanguage]['success-generate']);
            } catch (error) {
                console.error('Error:', error);
                showMessage('error', translations[currentLanguage]['error-network']);
                showLoading(false);
            }
        });

        // 初始化
        window.addEventListener('load', () => {
            checkApiStatus();
            updateTexts();
            setInterval(checkApiStatus, 30000); // 每30秒检查一次API状态
        });
    </script>
</body>
</html>
EOF
cat /mnt/user-data/outputs/index.html
Output

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI黄历 / The Dao Almanac - Your Daily Cosmic Guide</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #e0e0e0;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: bold;
        }

        .logo-icon {
            font-size: 32px;
        }

        .title {
            display: flex;
            flex-direction: column;
        }

        .title-main {
            font-size: 24px;
            background: linear-gradient(90deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .title-sub {
            font-size: 12px;
            color: #999;
        }

        .controls {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .lang-btn {
            padding: 8px 16px;
            background: transparent;
            border: 1px solid #ffd700;
            color: #ffd700;
            cursor: pointer;
            border-radius: 20px;
            transition: all 0.3s;
            font-size: 14px;
        }

        .lang-btn.active {
            background: #ffd700;
            color: #1a1a2e;
        }

        .lang-btn:hover {
            background: #ffd700;
            color: #1a1a2e;
        }

        .status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #4ade80;
        }

        .status-dot.disconnected {
            background: #ef4444;
        }

        main {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-top: 40px;
        }

        .form-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
        }

        .form-title {
            font-size: 24px;
            margin-bottom: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #e0e0e0;
        }

        .required {
            color: #ffd700;
        }

        input[type="text"],
        input[type="date"],
        select {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: #e0e0e0;
            font-size: 14px;
            transition: all 0.3s;
        }

        input[type="text"]::placeholder,
        select {
            color: #888;
        }

        input[type="text"]:focus,
        input[type="date"]:focus,
        select:focus {
            outline: none;
            border-color: #ffd700;
            background: rgba(255, 255, 255, 0.12);
            box-shadow: 0 0 10px rgba(255, 215, 0, 0.2);
        }

        .radio-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
        }

        input[type="radio"] {
            cursor: pointer;
            accent-color: #ffd700;
        }

        .hint {
            font-size: 12px;
            color: #888;
            margin-top: 6px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .hint-icon {
            font-size: 14px;
        }

        .privacy-notice {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
            padding: 12px 16px;
            border-radius: 4px;
            font-size: 12px;
            color: #a0aec0;
            margin-top: 20px;
            line-height: 1.5;
        }

        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            flex: 1;
            padding: 14px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-generate {
            background: #ffd700;
            color: #1a1a2e;
        }

        .btn-generate:hover {
            background: #ffed4e;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 215, 0, 0.3);
        }

        .btn-generate:disabled {
            background: #888;
            cursor: not-allowed;
            transform: none;
        }

        .btn-share {
            background: rgba(255, 255, 255, 0.1);
            color: #ffd700;
            border: 1px solid #ffd700;
        }

        .btn-share:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateY(-2px);
        }

        .result-section {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .result-title {
            font-size: 28px;
            font-weight: bold;
            text-align: center;
        }

        .date-display {
            text-align: center;
            font-size: 16px;
            color: #888;
        }

        .element-display {
            display: flex;
            justify-content: center;
            gap: 20px;
            font-size: 14px;
        }

        .element-item {
            padding: 8px 16px;
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid #ffd700;
            border-radius: 20px;
            color: #ffd700;
        }

        .result-item {
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-left: 3px solid #ffd700;
            border-radius: 4px;
        }

        .result-label {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }

        .result-content {
            font-size: 16px;
            line-height: 1.6;
            color: #e0e0e0;
            min-height: 40px;
        }

        .wisdom {
            font-size: 18px;
            text-align: center;
            padding: 24px;
            background: rgba(255, 215, 0, 0.08);
            border: 1px solid rgba(255, 215, 0, 0.3);
            border-radius: 8px;
            font-style: italic;
            line-height: 1.8;
            color: #ffd700;
        }

        .footer-name {
            text-align: right;
            font-size: 14px;
            color: #888;
            margin-top: 20px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255, 215, 0, 0.3);
            border-top-color: #ffd700;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            background: #2d3748;
            color: #e0e0e0;
            border-radius: 8px;
            display: none;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        .message.show {
            display: block;
        }

        .message.success {
            background: #10b981;
            color: white;
        }

        .message.error {
            background: #ef4444;
            color: white;
        }

        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @media (max-width: 1024px) {
            main {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 20px;
            }

            .form-section,
            .result-section {
                padding: 24px;
            }

            .title-main {
                font-size: 18px;
            }

            .controls {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <span class="logo-icon">🔮</span>
                <div class="title">
                    <div class="title-main">AI黄历 / The Dao Almanac</div>
                    <div class="title-sub">MVP · Your Daily Cosmic Guide</div>
                </div>
            </div>
            <div class="controls">
                <button class="lang-btn active" id="btn-cn" onclick="switchLanguage('cn')">中文</button>
                <button class="lang-btn" id="btn-en" onclick="switchLanguage('en')">English</button>
                <div class="status">
                    <span id="apiStatus" class="status-dot"></span>
                    <span id="apiStatusText">X API连接</span>
                </div>
            </div>
        </header>

        <main>
            <div class="form-section">
                <h2 class="form-title" id="form-title">生成你的黄历签文</h2>
                
                <form id="almanacForm">
                    <div class="form-group">
                        <label for="name" id="label-name">姓名 <span class="required">*</span></label>
                        <input type="text" id="name" placeholder="请输入您的名字" required>
                        <div class="hint" id="hint-name">
                            <span class="hint-icon">ℹ️</span>
                            <span id="hint-name-text">仅用于AI分析，不会公开</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="nickname" id="label-nickname">昵称 <span class="required">*</span></label>
                        <input type="text" id="nickname" placeholder="请输入昵称" required>
                        <div class="hint" id="hint-nickname">
                            <span class="hint-icon">✨</span>
                            <span id="hint-nickname-text">将显示在您的签文中</span>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="birthdate" id="label-birthdate">生日 <span class="required">*</span></label>
                        <input type="date" id="birthdate" required>
                    </div>

                    <div class="form-group">
                        <label for="birthTime" id="label-birthTime">出生时刻 (可选)</label>
                        <select id="birthTime">
                            <option value="unknown" id="time-unknown">不确定</option>
                            <option value="dawn" id="time-dawn">清晨 (05:00-07:00)</option>
                            <option value="morning" id="time-morning">上午 (07:00-11:00)</option>
                            <option value="noon" id="time-noon">中午 (11:00-13:00)</option>
                            <option value="afternoon" id="time-afternoon">下午 (13:00-17:00)</option>
                            <option value="dusk" id="time-dusk">傍晚 (17:00-19:00)</option>
                            <option value="night" id="time-night">夜间 (19:00-05:00)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label id="label-mood">心情状态 <span class="required">*</span></label>
                        <div class="radio-group">
                            <label class="radio-item">
                                <input type="radio" name="mood" value="calm" checked>
                                <span id="mood-calm">平静</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mood" value="anxious">
                                <span id="mood-anxious">焦虑</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mood" value="impulsive">
                                <span id="mood-impulsive">冲动</span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="mood" value="focused">
                                <span id="mood-focused">专注</span>
                            </label>
                        </div>
                    </div>

                    <div class="privacy-notice" id="privacy-notice">
                        🔒 隐私提示：您的姓名和生日仅用于AI命理分析，绝不会显示在分享卡片中，签文只会以"昵称"的形式显示。
                    </div>

                    <div class="buttons">
                        <button type="submit" class="btn-generate" id="btn-generate">生成签文</button>
                        <button type="button" class="btn-share" id="btn-share" style="display: none;">分享卡片</button>
                    </div>
                </form>
            </div>

            <div class="result-section">
                <div class="result-title" id="result-title">今日黄历</div>
                <div class="date-display" id="date">2025年10月30日</div>
                <div class="element-display">
                    <div class="element-item" id="element">五行</div>
                    <div class="element-item" id="polarity">阴阳</div>
                </div>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <div id="loading-text">正在生成您的签文...</div>
                </div>

                <div id="resultContent" style="display: none;">
                    <div class="result-item">
                        <div class="result-label" id="label-auspicious">宜</div>
                        <div class="result-content" id="auspicious"></div>
                    </div>

                    <div class="result-item">
                        <div class="result-label" id="label-avoid">忌</div>
                        <div class="result-content" id="avoid"></div>
                    </div>

                    <div class="result-item">
                        <div class="result-label" id="label-lucky">幸运提示</div>
                        <div class="result-content" id="lucky"></div>
                    </div>

                    <div class="wisdom" id="wisdom"></div>

                    <div class="footer-name" id="footer"></div>
                </div>
            </div>
        </main>
    </div>

    <div class="message" id="message"></div>

    <script>
        // 配置
        const API_BASE_URL = 'https://ai-almanac.vercel.app';

        let currentLanguage = 'cn';
        let apiConnected = false;

        // 多语言配置
        const translations = {
            cn: {
                'form-title': '生成你的黄历签文',
                'label-name': '姓名',
                'label-nickname': '昵称',
                'label-birthdate': '生日',
                'label-birthTime': '出生时刻 (可选)',
                'label-mood': '心情状态',
                'mood-calm': '平静',
                'mood-anxious': '焦虑',
                'mood-impulsive': '冲动',
                'mood-focused': '专注',
                'time-dawn': '清晨 (05:00-07:00)',
                'time-morning': '上午 (07:00-11:00)',
                'time-noon': '中午 (11:00-13:00)',
                'time-afternoon': '下午 (13:00-17:00)',
                'time-dusk': '傍晚 (17:00-19:00)',
                'time-night': '夜间 (19:00-05:00)',
                'time-unknown': '不确定',
                'hint-name': '仅用于AI分析，不会公开',
                'hint-nickname': '将显示在您的签文中',
                'privacy-notice': '🔒 隐私提示：您的姓名和生日仅用于AI命理分析，绝不会显示在分享卡片中，签文只会以"昵称"的形式显示。',
                'btn-generate': '生成签文',
                'btn-share': '分享卡片',
                'result-title': '今日黄历',
                'label-auspicious': '宜',
                'label-avoid': '忌',
                'label-lucky': '幸运提示',
                'loading-text': '正在生成您的签文...',
                'success-generate': '✓ 签文已生成',
                'error-required': '请填写所有必填字段',
                'error-network': '网络连接失败，请检查API服务器',
                'statusKey': 'statusText'
            },
            en: {
                'form-title': 'Generate Your Almanac Reading',
                'label-name': 'Name',
                'label-nickname': 'Nickname',
                'label-birthdate': 'Birth Date',
                'label-birthTime': 'Birth Time (Optional)',
                'label-mood': 'Current Mood',
                'mood-calm': 'Calm',
                'mood-anxious': 'Anxious',
                'mood-impulsive': 'Impulsive',
                'mood-focused': 'Focused',
                'time-dawn': 'Dawn (05:00-07:00)',
                'time-morning': 'Morning (07:00-11:00)',
                'time-noon': 'Noon (11:00-13:00)',
                'time-afternoon': 'Afternoon (13:00-17:00)',
                'time-dusk': 'Dusk (17:00-19:00)',
                'time-night': 'Night (19:00-05:00)',
                'time-unknown': 'Unknown',
                'hint-name': 'For AI analysis only, never shared',
                'hint-nickname': 'Will be displayed in your reading',
                'privacy-notice': '🔒 Privacy Notice: Your name and birth date are used only for AI divination analysis and will never be shown on shared cards. Only your nickname will be displayed.',
                'btn-generate': 'Generate Reading',
                'btn-share': 'Share Card',
                'result-title': 'Today\'s Almanac',
                'label-auspicious': 'Auspicious',
                'label-avoid': 'Avoid',
                'label-lucky': 'Lucky Tips',
                'loading-text': 'Generating your reading...',
                'success-generate': '✓ Reading generated',
                'error-required': 'Please fill in all required fields',
                'error-network': 'Network error. Please check the API server',
                'statusKey': 'statusText'
            }
        };

        // 检查API连接
        async function checkApiStatus() {
            try {
                const response = await fetch(`${API_BASE_URL}/api/health`, { timeout: 5000 });
                apiConnected = response.ok;
            } catch (error) {
                apiConnected = false;
            }
            updateApiStatus();
        }

        function updateApiStatus() {
            const status = document.getElementById('apiStatus');
            const statusText = document.getElementById('apiStatusText');
            if (apiConnected) {
                status.classList.remove('disconnected');
                statusText.textContent = currentLanguage === 'cn' ? '✓ API已连接' : '✓ API Connected';
            } else {
                status.classList.add('disconnected');
                statusText.textContent = currentLanguage === 'cn' ? 'X API连接' : 'X API Disconnected';
            }
        }

        // 切换语言
        function switchLanguage(lang) {
            currentLanguage = lang;
            document.getElementById('btn-cn').classList.toggle('active', lang === 'cn');
            document.getElementById('btn-en').classList.toggle('active', lang === 'en');
            updateTexts();
            updateApiStatus();
        }

        function updateTexts() {
            const trans = translations[currentLanguage];
            document.getElementById('form-title').textContent = trans['form-title'];
            document.getElementById('label-name').innerHTML = trans['label-name'] + ' <span class="required">*</span>';
            document.getElementById('label-nickname').innerHTML = trans['label-nickname'] + ' <span class="required">*</span>';
            document.getElementById('label-birthdate').innerHTML = trans['label-birthdate'] + ' <span class="required">*</span>';
            document.getElementById('label-birthTime').textContent = trans['label-birthTime'];
            document.getElementById('label-mood').innerHTML = trans['label-mood'] + ' <span class="required">*</span>';
            
            document.getElementById('mood-calm').textContent = trans['mood-calm'];
            document.getElementById('mood-anxious').textContent = trans['mood-anxious'];
            document.getElementById('mood-impulsive').textContent = trans['mood-impulsive'];
            document.getElementById('mood-focused').textContent = trans['mood-focused'];
            
            document.getElementById('time-dawn').textContent = trans['time-dawn'];
            document.getElementById('time-morning').textContent = trans['time-morning'];
            document.getElementById('time-noon').textContent = trans['time-noon'];
            document.getElementById('time-afternoon').textContent = trans['time-afternoon'];
            document.getElementById('time-dusk').textContent = trans['time-dusk'];
            document.getElementById('time-night').textContent = trans['time-night'];
            document.getElementById('time-unknown').textContent = trans['time-unknown'];
            
            document.getElementById('hint-name-text').textContent = trans['hint-name'];
            document.getElementById('hint-nickname-text').textContent = trans['hint-nickname'];
            document.getElementById('privacy-notice').textContent = trans['privacy-notice'];
            document.getElementById('btn-generate').textContent = trans['btn-generate'];
            document.getElementById('result-title').textContent = trans['result-title'];
            document.getElementById('label-auspicious').textContent = trans['label-auspicious'];
            document.getElementById('label-avoid').textContent = trans['label-avoid'];
            document.getElementById('label-lucky').textContent = trans['label-lucky'];
            document.getElementById('loading-text').textContent = trans['loading-text'];
        }

        // 显示加载状态
        function showLoading(show) {
            document.getElementById('loading').style.display = show ? 'block' : 'none';
            document.getElementById('resultContent').style.display = show ? 'none' : 'block';
            document.getElementById('btn-generate').disabled = show;
        }

        // 显示消息
        function showMessage(type, text) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.className = `message show ${type}`;
            setTimeout(() => {
                msg.classList.remove('show');
            }, 3000);
        }

        // 显示结果
        function displayResult(data, nickname) {
            const today = new Date();
            const dateStr = currentLanguage === 'cn'
                ? `${today.getFullYear()}年${today.getMonth() + 1}月${today.getDate()}日`
                : `${today.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}`;

            // 处理数据中的各个字段
            const auspicious = data.auspicious || '';
            const avoid = data.avoid || '';
            const lucky = data.lucky || `${data.luckyDirection || ''} · ${data.luckyColor || ''} · ${data.luckyHour || ''}`;
            const wisdom = data.wisdom || '';

            document.getElementById('date').textContent = dateStr;
            document.getElementById('auspicious').textContent = auspicious;
            document.getElementById('avoid').textContent = avoid;
            document.getElementById('lucky').textContent = lucky;
            document.getElementById('wisdom').textContent = wisdom;
            document.getElementById('footer').textContent = `— For ${nickname}`;

            showLoading(false);
        }

        // 表单提交
        document.getElementById('almanacForm').addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = {
                name: document.getElementById('name').value,
                nickname: document.getElementById('nickname').value,
                birthdate: document.getElementById('birthdate').value,
                birthTime: document.getElementById('birthTime').value,
                mood: document.querySelector('input[name="mood"]:checked').value,
                language: currentLanguage
            };

            if (!formData.name || !formData.nickname || !formData.birthdate) {
                showMessage('error', translations[currentLanguage]['error-required']);
                return;
            }

            showLoading(true);

            try {
                const response = await fetch(`${API_BASE_URL}/api/generate-almanac`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                if (!response.ok) {
                    throw new Error('API request failed');
                }

                const result = await response.json();
                
                // 处理后端返回的数据格式
                let almanacData;
                if (result.data && typeof result.data === 'object') {
                    almanacData = result.data;
                } else if (result.success && result.data) {
                    almanacData = result.data;
                } else {
                    almanacData = result;
                }
                
                displayResult(almanacData, formData.nickname);
                showMessage('success', translations[currentLanguage]['success-generate']);
            } catch (error) {
                console.error('Error:', error);
                showMessage('error', translations[currentLanguage]['error-network']);
                showLoading(false);
            }
        });

        // 初始化
        window.addEventListener('load', () => {
            checkApiStatus();
            updateTexts();
            setInterval(checkApiStatus, 30000); // 每30秒检查一次API状态
        });
    </script>
</body>
</html>
